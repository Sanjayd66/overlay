<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NOVA CONTROL PANEL - MANUAL MODE</title>
    <style>
        :root { --orange: #ff5a00; --blue: #0088ff; --bg: #0a0a0a; --card: #161616; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; padding: 20px; }
        
        /* Header & Top Bar */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid var(--orange); padding-bottom: 10px; }
        .status-pill { background: #0f0; color: #000; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 12px; }

        /* Setup Area */
        .setup-section { background: var(--card); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #333; }
        textarea { width: 100%; height: 80px; background: #000; color: #0f0; border: 1px solid #444; padding: 10px; box-sizing: border-box; font-family: monospace; }
        
        /* Grid Layout */
        .slot-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .slot-card { background: var(--card); border: 1px solid #333; padding: 12px; border-radius: 6px; display: flex; align-items: center; gap: 10px; transition: 0.2s; }
        .slot-card:hover { border-color: var(--orange); }
        .slot-num { font-size: 24px; font-weight: bold; color: var(--orange); min-width: 35px; }

        /* Inputs */
        input[type="text"] { background: #222; border: 1px solid #444; color: white; padding: 6px; border-radius: 4px; width: 100%; }
        input[type="color"] { width: 40px; height: 30px; border: none; background: none; cursor: pointer; }

        /* Buttons */
        .btn { cursor: pointer; border: none; border-radius: 4px; font-weight: bold; text-transform: uppercase; padding: 10px; }
        .btn-main { background: var(--orange); color: white; width: 100%; margin-top: 10px; }
        .btn-show { background: var(--blue); color: white; padding: 8px 15px; }
        .btn-import { background: #333; color: white; margin-top: 5px; }
    </style>
</head>
<body>

<div class="header">
    <h2>NOVA MANUAL CONTROL</h2>
    <div id="live-indicator" class="status-pill">STANDBY</div>
</div>

<div class="setup-section">
    <label>Bulk Import (Format: 1 | Team Name)</label>
    <textarea id="import-area" placeholder="1 | Team SouL&#10;2 | Global Esports"></textarea>
    <button class="btn btn-import" onclick="importSlots()">UPDATE ALL NAMES</button>
</div>

<div class="slot-grid" id="slotGrid">
    </div>

<script>
    const fbURL = "https://bgmi-overlay-default-rtdb.firebaseio.com/liveData.json";
    let teamDB = JSON.parse(localStorage.getItem('bgmi_manual_db')) || {};

    function init() {
        const grid = document.getElementById('slotGrid');
        grid.innerHTML = "";
        
        for (let i = 1; i <= 25; i++) {
            if (!teamDB[i]) {
                teamDB[i] = { name: `TEAM ${i}`, logo: `${i}`, sbg: '#ff5a00' };
            }

            const card = document.createElement('div');
            card.className = 'slot-card';
            card.innerHTML = `
                <div class="slot-num">${i}</div>
                <div style="flex-grow: 1;">
                    <input type="text" value="${teamDB[i].name}" onchange="updateDB(${i}, 'name', this.value)" placeholder="Team Name">
                    <div style="display: flex; gap: 5px; margin-top: 5px;">
                        <input type="text" value="${teamDB[i].logo}" onchange="updateDB(${i}, 'logo', this.value)" placeholder="Logo ID/URL">
                        <input type="color" value="${teamDB[i].sbg}" onchange="updateDB(${i}, 'sbg', this.value)">
                    </div>
                </div>
                <button class="btn btn-show" onclick="pushData(${i})">LIVE</button>
            `;
            grid.appendChild(card);
        }
    }

    function updateDB(id, key, value) {
        teamDB[id][key] = value;
        localStorage.setItem('bgmi_manual_db', JSON.stringify(teamDB));
    }

    function importSlots() {
        const lines = document.getElementById('import-area').value.split('\n');
        lines.forEach(line => {
            const match = line.match(/(\d+)\s*[|â€¢-]\s*(.*)/);
            if (match) {
                const id = parseInt(match[1]);
                if (teamDB[id]) teamDB[id].name = match[2].trim();
            }
        });
        localStorage.setItem('bgmi_manual_db', JSON.stringify(teamDB));
        init(); // Refresh UI
    }

    async function pushData(id) {
        try {
            const response = await fetch(fbURL, {
                method: 'PUT',
                body: JSON.stringify(teamDB[id])
            });
            if(response.ok) {
                document.getElementById('live-indicator').innerText = "LIVE: " + teamDB[id].name;
                document.getElementById('live-indicator').style.background = "#0f0";
            }
        } catch (e) {
            alert("Firebase Error: Check your URL");
        }
    }

    init();
</script>

</body>
</html>
